import{i as u}from"./DonutChart.vue_vue_type_style_index_0_scoped_f7bfb50c_lang-RLak3sph.js";import{f as h,a as b,H as v,R as m,I as g,W as y,c as _,o as C}from"./index-Br7qLbH3.js";const w={__name:"DonutChart",props:{data:{type:Array,default:()=>[]},labels:{type:Array,default:()=>[]},colors:{type:Array,default:()=>["#9B59B6","#3498DB","#1ABC9C","#F1C40F","#E74C3C"]},width:{type:String,default:"100%"},height:{type:String,default:"400px"}},setup(f){const t=f,a=b(null);let r=null,l=null,i=0;const c=()=>t.data.length&&typeof t.data[0]=="object"?t.data.map((e,o)=>({value:e.value,name:e.label||t.labels[o]||`项${o+1}`})):t.data.map((e,o)=>({value:e,name:t.labels[o]||`项${o+1}`}));function d(e){return e<350?["35%","50%"]:e<500?["40%","60%"]:e<700?["45%","65%"]:["50%","70%"]}function p(e){return e<350?10:e<500?12:e<700?13:15}const s=()=>{r||(r=u(a.value));const e=a.value.offsetWidth||400;i=e;const o={color:t.colors,tooltip:{trigger:"item",formatter:n=>`${n.name}: ${n.value} (${n.percent}%)`},series:[{type:"pie",radius:d(e),minAngle:10,avoidLabelOverlap:!0,label:{show:!0,position:"outside",formatter:"{b}",color:n=>n.color,fontWeight:"bold",fontSize:p(e),overflow:"break",lineHeight:16},labelLine:{show:!0,length:36,length2:48,lineStyle:{width:1.5}},itemStyle:{borderRadius:8,borderColor:"#fff",borderWidth:2},data:c()}],legend:{show:!1}};r.setOption(o)};return v(()=>[t.data,t.labels,t.colors],()=>{m(()=>s())},{deep:!0}),g(()=>{r=u(a.value),s(),l=new ResizeObserver(()=>{a.value.offsetWidth!==i&&(s(),r&&r.resize())}),l.observe(a.value)}),y(()=>{r&&(r.dispose(),r=null),l&&a.value&&(l.unobserve(a.value),l=null)}),(e,o)=>(C(),_("div",{ref_key:"chartRef",ref:a,class:"donut-chart-container"},null,512))}},R=h(w,[["__scopeId","data-v-f7bfb50c"]]);export{R as D};
