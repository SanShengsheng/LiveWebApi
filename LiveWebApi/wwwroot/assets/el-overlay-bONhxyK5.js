import{ae as I,q as G,n as Y,s as X,b as K,aB as J,y as A,p as D,I as _,aC as Q,W as R,ar as ee,at as oe,v as z,Z as $,H as T,aD as te,a9 as ne,ag as se,a as L,aE as le,aF as ae,R as ue,ay as N}from"./index-Br7qLbH3.js";import{P as O}from"./vnode-em1sSMFZ.js";import{c as F,h as H,x as ie,o as ce,y as re}from"./index-4xCaf6Pg.js";import{i as de}from"./icon-CPPp8HyR.js";import{t as fe}from"./index-BX35VZBE.js";import{U as V}from"./event-DyFzzncj.js";import{t as me,e as W}from"./aria-gYNd90_s.js";import{a as ve}from"./scroll-BbotL90k.js";const ye=e=>{if(!e)return{onClick:I,onMousedown:I,onMouseup:I};let o=!1,u=!1;return{onClick:n=>{o&&u&&e(n),o=u=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{u=n.target===n.currentTarget}}},pe=Y({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:D([String,Array,Object])},zIndex:{type:D([String,Number])}}),Ce={click:e=>e instanceof MouseEvent},ge="overlay";var he=G({name:"ElOverlay",props:pe,emits:Ce,setup(e,{slots:o,emit:u}){const c=X(ge),t=p=>{u("click",p)},{onClick:l,onMousedown:n,onMouseup:y}=ye(e.customMaskEvent?void 0:t);return()=>e.mask?K("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:n,onMouseup:y},[A(o,"default")],O.STYLE|O.CLASS|O.PROPS,["onClick","onMouseup","onMousedown"]):J("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[A(o,"default")])}});const ke=he,be=Y({center:Boolean,alignCenter:Boolean,closeIcon:{type:de},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ie={close:()=>!0},Oe=(e,o,u,c)=>{const t={offsetX:0,offsetY:0},l=(a,i)=>{if(e.value){const{offsetX:d,offsetY:f}=t,C=e.value.getBoundingClientRect(),g=C.left,h=C.top,b=C.width,E=C.height,w=document.documentElement.clientWidth,x=document.documentElement.clientHeight,M=-g+d,S=-h+f,P=w-g-b+d,B=x-h-(E<x?E:0)+f;c!=null&&c.value||(a=Math.min(Math.max(a,M),P),i=Math.min(Math.max(i,S),B)),t.offsetX=a,t.offsetY=i,e.value.style.transform=`translate(${F(a)}, ${F(i)})`}},n=a=>{const i=a.clientX,d=a.clientY,{offsetX:f,offsetY:C}=t,g=b=>{const E=f+b.clientX-i,w=C+b.clientY-d;l(E,w)},h=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)},y=()=>{o.value&&e.value&&(o.value.addEventListener("mousedown",n),window.addEventListener("resize",v))},p=()=>{o.value&&e.value&&(o.value.removeEventListener("mousedown",n),window.removeEventListener("resize",v))},r=()=>{t.offsetX=0,t.offsetY=0,e.value&&(e.value.style.transform="")},v=()=>{const{offsetX:a,offsetY:i}=t;l(a,i)};return _(()=>{Q(()=>{u.value?y():p()})}),R(()=>{p()}),{resetPosition:r,updatePosition:v}},De=Y({...be,appendToBody:Boolean,appendTo:{type:fe.to.type,default:"body"},beforeClose:{type:D(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),ze={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[V]:e=>ee(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Ee=(e,o={})=>{oe(e)||me("[useLockscreen]","You need to pass a ref param to this function");const u=o.ns||X("popup"),c=z(()=>u.bm("parent","hidden"));if(!$||H(document.body,c.value))return;let t=0,l=!1,n="0";const y=()=>{setTimeout(()=>{typeof document>"u"||l&&document&&(document.body.style.width=n,re(document.body,c.value))},200)};T(e,p=>{if(!p){y();return}l=!H(document.body,c.value),l&&(n=document.body.style.width,ie(document.body,c.value)),t=ve(u.namespace.value);const r=document.documentElement.clientHeight<document.body.scrollHeight,v=ce(document.body,"overflowY");t>0&&(r||v==="scroll")&&l&&(document.body.style.width=`calc(100% - ${t}px)`)}),te(()=>y())},Fe=(e,o)=>{var u;const t=ne().emit,{nextZIndex:l}=se();let n="";const y=W(),p=W(),r=L(!1),v=L(!1),a=L(!1),i=L((u=e.zIndex)!=null?u:l());let d,f;const C=le("namespace",ae),g=z(()=>{const s={},m=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(s[`${m}-margin-top`]=e.top),e.width&&(s[`${m}-width`]=F(e.width))),s}),h=z(()=>e.alignCenter?{display:"flex"}:{});function b(){t("opened")}function E(){t("closed"),t(V,!1),e.destroyOnClose&&(a.value=!1)}function w(){t("close")}function x(){f==null||f(),d==null||d(),e.openDelay&&e.openDelay>0?{stop:d}=N(()=>B(),e.openDelay):B()}function M(){d==null||d(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=N(()=>k(),e.closeDelay):k()}function S(){function s(m){m||(v.value=!0,r.value=!1)}e.beforeClose?e.beforeClose(s):M()}function P(){e.closeOnClickModal&&S()}function B(){$&&(r.value=!0)}function k(){r.value=!1}function U(){t("openAutoFocus")}function Z(){t("closeAutoFocus")}function j(s){var m;((m=s.detail)==null?void 0:m.focusReason)==="pointer"&&s.preventDefault()}e.lockScroll&&Ee(r);function q(){e.closeOnPressEscape&&S()}return T(()=>e.zIndex,()=>{var s;i.value=(s=e.zIndex)!=null?s:l()}),T(()=>e.modelValue,s=>{var m;s?(v.value=!1,x(),a.value=!0,i.value=(m=e.zIndex)!=null?m:l(),ue(()=>{t("open"),o.value&&(o.value.parentElement.scrollTop=0,o.value.parentElement.scrollLeft=0,o.value.scrollTop=0)})):r.value&&M()}),T(()=>e.fullscreen,s=>{o.value&&(s?(n=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=n)}),_(()=>{e.modelValue&&(r.value=!0,a.value=!0,x())}),{afterEnter:b,afterLeave:E,beforeLeave:w,handleClose:S,onModalClick:P,close:M,doClose:k,onOpenAutoFocus:U,onCloseAutoFocus:Z,onCloseRequested:q,onFocusoutPrevented:j,titleId:y,bodyId:p,closed:v,style:g,overlayDialogStyle:h,rendered:a,visible:r,zIndex:i}};export{ke as E,De as a,Oe as b,Ee as c,ze as d,ye as e,Ie as f,be as g,Fe as u};
